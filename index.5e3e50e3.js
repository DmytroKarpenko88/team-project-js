const e=new class{constructor(){this.allGenres=null,this.config=null,this.getGenre().then((({genres:e})=>{this.allGenres=e})),this.getConfig().then((({images:e})=>{this.config={...e}}))}#e="https://api.themoviedb.org/3";async getResource(e){return await fetch(`${this.#e}${e}api_key=221af12348c3ca060963c8b12f5995d3`).then((e=>e.json()))}getListMovies=async(e=1)=>{const t=await this.getResource(`/trending/all/day?page=${e}&`);return this.transformListMovies(t)};getMovie=async e=>await this.getResource(`/movie/${e}?`);searchMovie=async e=>await this.getResource(`/search/movie?query=${e}&`);getTrailer=async e=>await this.getResource(`/movie/${e}/videos?`);transformListMovies=e=>{const{page:t,total_results:s,results:a}=e,i=s/a.length;return{page:t,totalPages:i===Math.floor(i)?i:Math.ceil(i),listMovies:a.map((e=>{console.log(e);const{id:t,backdrop_path:s,title:a,name:i,release_date:n,genre_ids:l}=e,o=this.allGenres.filter((e=>l.includes(e.id))).map((e=>e.name)),r=`${this.config.base_url}w440_and_h660_face${s}`,c=n&&new Date(Date.parse(n));return{id:t,genres:o,poster:r,release:n?c.getFullYear():null,title:a||i}}))}};getGenre=async()=>await this.getResource("/genre/movie/list?");getConfig=async()=>await this.getResource("/configuration?")},t=document.querySelector(".gallery");e.getListMovies().then((s=>{(async s=>{const a=await Promise.all(s.map((async t=>{const{id:s,title:a,genre_ids:i,release_date:n,backdrop_path:l}=t,o=await e.getGenre(),r=await e.getConfig(),{allGenres:c}=o,{base_url:g}=r.images;let h="";c&&(h=c.filter((e=>i.includes(e.id))).map((e=>e.name)).join(", "));let d="";return void 0!==n&&n.length>4&&(d=n.slice(0,4)),`<li>\n        <a class="gallery__link" href="#">\n          <img class="gallery__image" data-id="${s}" src="${l?`${g}w440_and_h660_face${l}`:"https://dummyimage.com/395x574/000/fff.jpg&text=no+poster"}" alt="${a} movie poster" loading="lazy">\n\n        <div class="info">\n          <h3 class="info__item">${a}</h3>\n          <div class="info-detail">\n            <p class="info-detail__item">${h}</p>\n            <p class="info-detail__item">${d}</p>\n          </div>\n        </div>\n        </a>\n      </li>`})).join(""));console.log("movieGalleryMarkup:",a),t.innerHTML=a})(s.listMovies),console.log(s)})).catch((e=>{console.log(e.message)}));
//# sourceMappingURL=index.5e3e50e3.js.map
